import { Clear } from '../actions/actions';
import { Create, CreateMany } from '../actions/create-actions';
import { Delete, DeleteMany } from '../actions/delete-actions';
import { DeleteByKey, DeleteManyByKeys } from '../actions/delete-by-key-actions';
import { Deselect, DeselectAll, DeselectMany, DeselectManyByKeys } from '../actions/deselection-actions';
import { Change, Edit, EditByKey, EditNew, EndEdit } from '../actions/edit-actions';
import { Load, LoadIfNecessary } from '../actions/load-actions';
import { LoadAll, LoadAllIfNecessary } from '../actions/load-all-actions';
import { LoadMany, LoadManyIfNecessary } from '../actions/load-many-actions';
import { LoadPage, LoadPageIfNecessary } from '../actions/load-page-actions';
import { LoadRange, LoadRangeIfNecessary } from '../actions/load-range-actions';
import { Replace, ReplaceMany } from '../actions/replace-actions';
import { Select, SelectByKey, SelectMany, SelectManyByKeys, SelectMore, SelectMoreByKeys } from '../actions/selection-actions';
import { Update, UpdateMany } from '../actions/update-actions';
import { Upsert, UpsertMany } from '../actions/upsert-actions';
/**
 * Builds a new facade class for the specified entity model and parent state.
 * @param selectors - the selector map for the specified entity
 */
export const buildFacade = (selectors) => {
    const BaseFacade = class Facade {
        constructor(modelType, store) {
            this.modelType = modelType;
            this.store = store;
            this.all$ = this.store.select(selectors.selectAll);
            this.sorted$ = this.store.select(selectors.selectAllSorted);
            this.entities$ = this.store.select(selectors.selectEntities);
            this.ids$ = this.store.select(selectors.selectIds);
            this.total$ = this.store.select(selectors.selectTotal);
            this.hasEntities$ = this.store.select(selectors.selectHasEntities);
            this.hasNoEntities$ = this.store.select(selectors.selectHasNoEntities);
            this.total$ = this.store.select(selectors.selectTotal);
            this.current$ = this.store.select(selectors.selectCurrentEntity);
            this.currentKey$ = this.store.select(selectors.selectCurrentEntityKey);
            this.currentSet$ = this.store.select(selectors.selectCurrentEntities);
            this.currentSetKeys$ = this.store.select(selectors.selectCurrentEntitiesKeys);
            this.edited$ = this.store.select(selectors.selectEditedEntity);
            this.isDirty$ = this.store.select(selectors.selectIsDirty);
            this.currentPage$ = this.store.select(selectors.selectCurrentPage);
            this.currentRange$ = this.store.select(selectors.selectCurrentRange);
            this.totalPageable$ = this.store.select(selectors.selectTotalPageable);
            this.hasBeenLoaded$ = this.store.select(selectors.selectHasBeenLoaded);
            this.loadWasAttempted$ = this.store.select(selectors.selectLoadWasAttempted);
            this.isLoading$ = this.store.select(selectors.selectIsLoading);
            this.isSaving$ = this.store.select(selectors.selectIsSaving);
            this.isDeleting$ = this.store.select(selectors.selectIsDeleting);
            this.loadedAt$ = this.store.select(selectors.selectLoadedAt);
            this.savedAt$ = this.store.select(selectors.selectSavedAt);
            this.createdAt$ = this.store.select(selectors.selectCreatedAt);
            this.updatedAt$ = this.store.select(selectors.selectUpdatedAt);
            this.replacedAt$ = this.store.select(selectors.selectReplacedAt);
            this.deletedAt$ = this.store.select(selectors.selectDeletedAt);
        }
        /**
         * @deprecated customSorted$ relies on selectors with props, which has fallen out of practice. Will be removed
         * in the next version of auto-entity.
         */
        customSorted$(name) {
            return this.store.select(selectors.selectCustomSorted, { name });
        }
        // endregion
        // region Activities
        select(entity, correlationId) {
            const action = new Select(this.modelType, entity, correlationId);
            this.store.dispatch(action);
            return action.correlationId;
        }
        selectByKey(key, correlationId) {
            const action = new SelectByKey(this.modelType, key, correlationId);
            this.store.dispatch(action);
            return action.correlationId;
        }
        selectMany(entities, correlationId) {
            const action = new SelectMany(this.modelType, entities, correlationId);
            this.store.dispatch(action);
            return action.correlationId;
        }
        selectMore(entities, correlationId) {
            const action = new SelectMore(this.modelType, entities, correlationId);
            this.store.dispatch(action);
            return action.correlationId;
        }
        selectManyByKeys(keys, correlationId) {
            const action = new SelectManyByKeys(this.modelType, keys, correlationId);
            this.store.dispatch(action);
            return action.correlationId;
        }
        selectMoreByKeys(keys, correlationId) {
            const action = new SelectMoreByKeys(this.modelType, keys, correlationId);
            this.store.dispatch(action);
            return action.correlationId;
        }
        deselect(correlationId) {
            const action = new Deselect(this.modelType, correlationId);
            this.store.dispatch(action);
            return action.correlationId;
        }
        deselectMany(entities, correlationId) {
            const action = new DeselectMany(this.modelType, entities, correlationId);
            this.store.dispatch(action);
            return action.correlationId;
        }
        deselectManyByKeys(keys, correlationId) {
            const action = new DeselectManyByKeys(this.modelType, keys, correlationId);
            this.store.dispatch(action);
            return action.correlationId;
        }
        deselectAll(correlationId) {
            const action = new DeselectAll(this.modelType, correlationId);
            this.store.dispatch(action);
            return action.correlationId;
        }
        edit(entity, correlationId) {
            const action = new Edit(this.modelType, entity, correlationId);
            this.store.dispatch(action);
            return action.correlationId;
        }
        editNew(entity, correlationId) {
            const action = new EditNew(this.modelType, entity, correlationId);
            this.store.dispatch(action);
            return action.correlationId;
        }
        editByKey(key, correlationId) {
            const action = new EditByKey(this.modelType, key, correlationId);
            this.store.dispatch(action);
            return action.correlationId;
        }
        change(entity, correlationId) {
            const action = new Change(this.modelType, entity, correlationId);
            this.store.dispatch(action);
            return action.correlationId;
        }
        endEdit(correlationId) {
            const action = new EndEdit(this.modelType, correlationId);
            this.store.dispatch(action);
            return action.correlationId;
        }
        load(keys, criteria, correlationId) {
            const action = new Load(this.modelType, keys, criteria, correlationId);
            this.store.dispatch(action);
            return action.correlationId;
        }
        loadIfNecessary(keys, criteria, maxAge, correlationId) {
            const action = new LoadIfNecessary(this.modelType, keys, maxAge, criteria, correlationId);
            this.store.dispatch(action);
            return action.correlationId;
        }
        loadMany(criteria, correlationId) {
            const action = new LoadMany(this.modelType, criteria, correlationId);
            this.store.dispatch(action);
            return action.correlationId;
        }
        loadManyIfNecessary(criteria, maxAge, correlationId) {
            const action = new LoadManyIfNecessary(this.modelType, maxAge, criteria, correlationId);
            this.store.dispatch(action);
            return action.correlationId;
        }
        loadAll(criteria, correlationId) {
            const action = new LoadAll(this.modelType, criteria, correlationId);
            this.store.dispatch(action);
            return action.correlationId;
        }
        loadAllIfNecessary(criteria, maxAge, correlationId) {
            const action = new LoadAllIfNecessary(this.modelType, maxAge, criteria, correlationId);
            this.store.dispatch(action);
            return action.correlationId;
        }
        loadPage(page, criteria, correlationId) {
            const action = new LoadPage(this.modelType, page, criteria, correlationId);
            this.store.dispatch(action);
            return action.correlationId;
        }
        loadPageIfNecessary(page, criteria, maxAge, correlationId) {
            const action = new LoadPageIfNecessary(this.modelType, page, maxAge, criteria, correlationId);
            this.store.dispatch(action);
            return action.correlationId;
        }
        loadRange(range, criteria, correlationId) {
            const action = new LoadRange(this.modelType, range, criteria, correlationId);
            this.store.dispatch(action);
            return action.correlationId;
        }
        loadRangeIfNecessary(range, criteria, maxAge, correlationId) {
            const action = new LoadRangeIfNecessary(this.modelType, range, maxAge, criteria, correlationId);
            this.store.dispatch(action);
            return action.correlationId;
        }
        create(entity, criteria, correlationId) {
            const action = new Create(this.modelType, entity, criteria, correlationId);
            this.store.dispatch(action);
            return action.correlationId;
        }
        createMany(entities, criteria, correlationId) {
            const action = new CreateMany(this.modelType, entities, criteria, correlationId);
            this.store.dispatch(action);
            return action.correlationId;
        }
        update(entity, criteria, correlationId) {
            const action = new Update(this.modelType, entity, criteria, correlationId);
            this.store.dispatch(action);
            return action.correlationId;
        }
        updateMany(entities, criteria, correlationId) {
            const action = new UpdateMany(this.modelType, entities, criteria, correlationId);
            this.store.dispatch(action);
            return action.correlationId;
        }
        upsert(entity, criteria, correlationId) {
            const action = new Upsert(this.modelType, entity, criteria, correlationId);
            this.store.dispatch(action);
            return action.correlationId;
        }
        upsertMany(entities, criteria, correlationId) {
            const action = new UpsertMany(this.modelType, entities, criteria, correlationId);
            this.store.dispatch(action);
            return action.correlationId;
        }
        replace(entity, criteria, correlationId) {
            const action = new Replace(this.modelType, entity, criteria, correlationId);
            this.store.dispatch(action);
            return action.correlationId;
        }
        replaceMany(entities, criteria, correlationId) {
            const action = new ReplaceMany(this.modelType, entities, criteria, correlationId);
            this.store.dispatch(action);
            return action.correlationId;
        }
        delete(entity, criteria, correlationId) {
            const action = new Delete(this.modelType, entity, criteria, correlationId);
            this.store.dispatch(action);
            return action.correlationId;
        }
        deleteMany(entities, criteria, correlationId) {
            const action = new DeleteMany(this.modelType, entities, criteria, correlationId);
            this.store.dispatch(action);
            return action.correlationId;
        }
        deleteByKey(key, criteria, correlationId) {
            const action = new DeleteByKey(this.modelType, key, criteria, correlationId);
            this.store.dispatch(action);
            return action.correlationId;
        }
        deleteManyByKeys(keys, criteria, correlationId) {
            const action = new DeleteManyByKeys(this.modelType, keys, criteria, correlationId);
            this.store.dispatch(action);
            return action.correlationId;
        }
        clear(correlationId) {
            const action = new Clear(this.modelType, correlationId);
            this.store.dispatch(action);
            return action.correlationId;
        }
    };
    return BaseFacade;
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmFjYWRlLWJ1aWxkZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9uZ3J4LWF1dG8tZW50aXR5L3NyYy9saWIvdXRpbC9mYWNhZGUtYnVpbGRlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFHQSxPQUFPLEVBQUUsS0FBSyxFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUFDM0MsT0FBTyxFQUFFLE1BQU0sRUFBRSxVQUFVLEVBQUUsTUFBTSwyQkFBMkIsQ0FBQztBQUMvRCxPQUFPLEVBQUUsTUFBTSxFQUFFLFVBQVUsRUFBRSxNQUFNLDJCQUEyQixDQUFDO0FBQy9ELE9BQU8sRUFBRSxXQUFXLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxrQ0FBa0MsQ0FBQztBQUNqRixPQUFPLEVBQUUsUUFBUSxFQUFFLFdBQVcsRUFBRSxZQUFZLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxnQ0FBZ0MsQ0FBQztBQUN6RyxPQUFPLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLHlCQUF5QixDQUFDO0FBQ3BGLE9BQU8sRUFBRSxJQUFJLEVBQUUsZUFBZSxFQUFFLE1BQU0seUJBQXlCLENBQUM7QUFDaEUsT0FBTyxFQUFFLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLDZCQUE2QixDQUFDO0FBQzFFLE9BQU8sRUFBRSxRQUFRLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSw4QkFBOEIsQ0FBQztBQUM3RSxPQUFPLEVBQUUsUUFBUSxFQUFFLG1CQUFtQixFQUFFLE1BQU0sOEJBQThCLENBQUM7QUFDN0UsT0FBTyxFQUFFLFNBQVMsRUFBRSxvQkFBb0IsRUFBRSxNQUFNLCtCQUErQixDQUFDO0FBQ2hGLE9BQU8sRUFBRSxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sNEJBQTRCLENBQUM7QUFDbEUsT0FBTyxFQUFFLE1BQU0sRUFBRSxXQUFXLEVBQUUsVUFBVSxFQUFFLGdC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QUMsQ0FBQztZQUM1QixPQUFPLE1BQU0sQ0FBQyxhQUFhLENBQUM7UUFDOUIsQ0FBQztRQUVELEtBQUssQ0FBQyxhQUFzQjtZQUMxQixNQUFNLE1BQU0sR0FBRyxJQUFJLEtBQUssQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLGFBQWEsQ0FBQyxDQUFDO1lBQ3hELElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQzVCLE9BQU8sTUFBTSxDQUFDLGFBQWEsQ0FBQztRQUM5QixDQUFDO0tBRUYsQ0FBQztJQUVGLE9BQU8sVUFBVSxDQUFDO0FBQ3BCLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFN0b3JlIH0gZnJvbSAnQG5ncngvc3RvcmUnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xuXG5pbXBvcnQgeyBDbGVhciB9IGZyb20gJy4uL2FjdGlvbnMvYWN0aW9ucyc7XG5pbXBvcnQgeyBDcmVhdGUsIENyZWF0ZU1hbnkgfSBmcm9tICcuLi9hY3Rpb25zL2NyZWF0ZS1hY3Rpb25zJztcbmltcG9ydCB7IERlbGV0ZSwgRGVsZXRlTWFueSB9IGZyb20gJy4uL2FjdGlvbnMvZGVsZXRlLWFjdGlvbnMnO1xuaW1wb3J0IHsgRGVsZXRlQnlLZXksIERlbGV0ZU1hbnlCeUtleXMgfSBmcm9tICcuLi9hY3Rpb25zL2RlbGV0ZS1ieS1rZXktYWN0aW9ucyc7XG5pbXBvcnQgeyBEZXNlbGVjdCwgRGVzZWxlY3RBbGwsIERlc2VsZWN0TWFueSwgRGVzZWxlY3RNYW55QnlLZXlzIH0gZnJvbSAnLi4vYWN0aW9ucy9kZXNlbGVjdGlvbi1hY3Rpb25zJztcbmltcG9ydCB7IENoYW5nZSwgRWRpdCwgRWRpdEJ5S2V5LCBFZGl0TmV3LCBFbmRFZGl0IH0gZnJvbSAnLi4vYWN0aW9ucy9lZGl0LWFjdGlvbnMnO1xuaW1wb3J0IHsgTG9hZCwgTG9hZElmTmVjZXNzYXJ5IH0gZnJvbSAnLi4vYWN0aW9ucy9sb2FkLWFjdGlvbnMnO1xuaW1wb3J0IHsgTG9hZEFsbCwgTG9hZEFsbElmTmVjZXNzYXJ5IH0gZnJvbSAnLi4vYWN0aW9ucy9sb2FkLWFsbC1hY3Rpb25zJztcbmltcG9ydCB7IExvYWRNYW55LCBMb2FkTWFueUlmTmVjZXNzYXJ5IH0gZnJvbSAnLi4vYWN0aW9ucy9sb2FkLW1hbnktYWN0aW9ucyc7XG5pbXBvcnQgeyBMb2FkUGFnZSwgTG9hZFBhZ2VJZk5lY2Vzc2FyeSB9IGZyb20gJy4uL2FjdGlvbnMvbG9hZC1wYWdlLWFjdGlvbnMnO1xuaW1wb3J0IHsgTG9hZFJhbmdlLCBMb2FkUmFuZ2VJZk5lY2Vzc2FyeSB9IGZyb20gJy4uL2FjdGlvbnMvbG9hZC1yYW5nZS1hY3Rpb25zJztcbmltcG9ydCB7IFJlcGxhY2UsIFJlcGxhY2VNYW55IH0gZnJvbSAnLi4vYWN0aW9ucy9yZXBsYWNlLWFjdGlvbnMnO1xuaW1wb3J0IHsgU2VsZWN0LCBTZWxlY3RCeUtleSwgU2VsZWN0TWFueSwgU2VsZWN0TWFueUJ5S2V5cywgU2VsZWN0TW9yZSwgU2VsZWN0TW9yZUJ5S2V5cyB9IGZyb20gJy4uL2FjdGlvbnMvc2VsZWN0aW9uLWFjdGlvbnMnO1xuaW1wb3J0IHsgVXBkYXRlLCBVcGRhdGVNYW55IH0gZnJvbSAnLi4vYWN0aW9ucy91cGRhdGUtYWN0aW9ucyc7XG5pbXBvcnQgeyBVcHNlcnQsIFVwc2VydE1hbnkgfSBmcm9tICcuLi9hY3Rpb25zL3Vwc2VydC1hY3Rpb25zJztcbmltcG9ydCB7IFBhZ2UsIFJhbmdlIH0gZnJvbSAnLi4vbW9kZWxzJztcbmltcG9ydCB7IEVudGl0eUlkZW50aXR5IH0gZnJvbSAnLi4vdHlwZXMvZW50aXR5LWlkZW50aXR5JztcbmltcG9ydCB7IElFbnRpdHlEaWN0aW9uYXJ5IH0gZnJvbSAnLi9lbnRpdHktc3RhdGUnO1xuaW1wb3J0IHsgSUVudGl0eUZhY2FkZSB9IGZyb20gJy4vZmFjYWRlJztcbmltcG9ydCB7IElTZWxlY3Rvck1hcCB9IGZyb20gJy4vc2VsZWN0b3ItbWFwJztcblxuLyoqXG4gKiBCdWlsZHMgYSBuZXcgZmFjYWRlIGNsYXNzIGZvciB0aGUgc3BlY2lmaWVkIGVudGl0eSBtb2RlbCBhbmQgcGFyZW50IHN0YXRlLlxuICogQHBhcmFtIHNlbGVjdG9ycyAtIHRoZSBzZWxlY3RvciBtYXAgZm9yIHRoZSBzcGVjaWZpZWQgZW50aXR5XG4gKi9cbmV4cG9ydCBjb25zdCBidWlsZEZhY2FkZSA9IDxUTW9kZWwsIFRQYXJlbnRTdGF0ZT4oc2VsZWN0b3JzOiBJU2VsZWN0b3JNYXA8VFBhcmVudFN0YXRlLCBUTW9kZWw+KSA9PiB7XG4gIGNvbnN0IEJhc2VGYWNhZGUgPSBjbGFzcyBGYWNhZGUgaW1wbGVtZW50cyBJRW50aXR5RmFjYWRlPFRNb2RlbD4ge1xuICAgIG1vZGVsVHlwZTogbmV3ICgpID0+IFRNb2RlbDtcbiAgICBzdG9yZTogU3RvcmU8YW55PjtcblxuICAgIGNvbnN0cnVjdG9yKG1vZGVsVHlwZTogbmV3ICgpID0+IFRNb2RlbCwgc3RvcmU6IFN0b3JlPGFueT4pIHtcbiAgICAgIHRoaXMubW9kZWxUeXBlID0gbW9kZWxUeXBlO1xuICAgICAgdGhpcy5zdG9yZSA9IHN0b3JlO1xuXG4gICAgICB0aGlzLmFsbCQgPSB0aGlzLnN0b3JlLnNlbGVjdChzZWxlY3RvcnMuc2VsZWN0QWxsKTtcbiAgICAgIHRoaXMuc29ydGVkJCA9IHRoaXMuc3RvcmUuc2VsZWN0KHNlbGVjdG9ycy5zZWxlY3RBbGxTb3J0ZWQpO1xuICAgICAgdGhpcy5lbnRpdGllcyQgPSB0aGlzLnN0b3JlLnNlbGVjdChzZWxlY3RvcnMuc2VsZWN0RW50aXRpZXMpO1xuICAgICAgdGhpcy5pZHMkID0gdGhpcy5zdG9yZS5zZWxlY3Qoc2VsZWN0b3JzLnNlbGVjdElkcyk7XG4gICAgICB0aGlzLnRvdGFsJCA9IHRoaXMuc3RvcmUuc2VsZWN0KHNlbGVjdG9ycy5zZWxlY3RUb3RhbCk7XG4gICAgICB0aGlzLmhhc0VudGl0aWVzJCA9IHRoaXMuc3RvcmUuc2VsZWN0KHNlbGVjdG9ycy5zZWxlY3RIYXNFbnRpdGllcyk7XG4gICAgICB0aGlzLmhhc05vRW50aXRpZXMkID0gdGhpcy5zdG9yZS5zZWxlY3Qoc2VsZWN0b3JzLnNlbGVjdEhhc05vRW50aXRpZXMpO1xuICAgICAgdGhpcy50b3RhbCQgPSB0aGlzLnN0b3JlLnNlbGVjdChzZWxlY3RvcnMuc2VsZWN0VG90YWwpO1xuICAgICAgdGhpcy5jdXJyZW50JCA9IHRoaXMuc3RvcmUuc2VsZWN0KHNlbGVjdG9ycy5zZWxlY3RDdXJyZW50RW50aXR5KTtcbiAgICAgIHRoaXMuY3VycmVudEtleSQgPSB0aGlzLnN0b3JlLnNlbGVjdChzZWxlY3RvcnMuc2VsZWN0Q3VycmVudEVudGl0eUtleSk7XG4gICAgICB0aGlzLmN1cnJlbnRTZXQkID0gdGhpcy5zdG9yZS5zZWxlY3Qoc2VsZWN0b3JzLnNlbGVjdEN1cnJlbnRFbnRpdGllcyk7XG4gICAgICB0aGlzLmN1cnJlbnRTZXRLZXlzJCA9IHRoaXMuc3RvcmUuc2VsZWN0KHNlbGVjdG9ycy5zZWxlY3RDdXJyZW50RW50aXRpZXNLZXlzKTtcbiAgICAgIHRoaXMuZWRpdGVkJCA9IHRoaXMuc3RvcmUuc2VsZWN0KHNlbGVjdG9ycy5zZWxlY3RFZGl0ZWRFbnRpdHkpO1xuICAgICAgdGhpcy5pc0RpcnR5JCA9IHRoaXMuc3RvcmUuc2VsZWN0KHNlbGVjdG9ycy5zZWxlY3RJc0RpcnR5KTtcbiAgICAgIHRoaXMuY3VycmVudFBhZ2UkID0gdGhpcy5zdG9yZS5zZWxlY3Qoc2VsZWN0b3JzLnNlbGVjdEN1cnJlbnRQYWdlKTtcbiAgICAgIHRoaXMuY3VycmVudFJhbmdlJCA9IHRoaXMuc3RvcmUuc2VsZWN0KHNlbGVjdG9ycy5zZWxlY3RDdXJyZW50UmFuZ2UpO1xuICAgICAgdGhpcy50b3RhbFBhZ2VhYmxlJCA9IHRoaXMuc3RvcmUuc2VsZWN0KHNlbGVjdG9ycy5zZWxlY3RUb3RhbFBhZ2VhYmxlKTtcbiAgICAgIHRoaXMuaGFzQmVlbkxvYWRlZCQgPSB0aGlzLnN0b3JlLnNlbGVjdChzZWxlY3RvcnMuc2VsZWN0SGFzQmVlbkxvYWRlZCk7XG4gICAgICB0aGlzLmxvYWRXYXNBdHRlbXB0ZWQkID0gdGhpcy5zdG9yZS5zZWxlY3Qoc2VsZWN0b3JzLnNlbGVjdExvYWRXYXNBdHRlbXB0ZWQpO1xuICAgICAgdGhpcy5pc0xvYWRpbmckID0gdGhpcy5zdG9yZS5zZWxlY3Qoc2VsZWN0b3JzLnNlbGVjdElzTG9hZGluZyk7XG4gICAgICB0aGlzLmlzU2F2aW5nJCA9IHRoaXMuc3RvcmUuc2VsZWN0KHNlbGVjdG9ycy5zZWxlY3RJc1NhdmluZyk7XG4gICAgICB0aGlzLmlzRGVsZXRpbmckID0gdGhpcy5zdG9yZS5zZWxlY3Qoc2VsZWN0b3JzLnNlbGVjdElzRGVsZXRpbmcpO1xuICAgICAgdGhpcy5sb2FkZWRBdCQgPSB0aGlzLnN0b3JlLnNlbGVjdChzZWxlY3RvcnMuc2VsZWN0TG9hZGVkQXQpO1xuICAgICAgdGhpcy5zYXZlZEF0JCA9IHRoaXMuc3RvcmUuc2VsZWN0KHNlbGVjdG9ycy5zZWxlY3RTYXZlZEF0KTtcbiAgICAgIHRoaXMuY3JlYXRlZEF0JCA9IHRoaXMuc3RvcmUuc2VsZWN0KHNlbGVjdG9ycy5zZWxlY3RDcmVhdGVkQXQpO1xuICAgICAgdGhpcy51cGRhdGVkQXQkID0gdGhpcy5zdG9yZS5zZWxlY3Qoc2VsZWN0b3JzLnNlbGVjdFVwZGF0ZWRBdCk7XG4gICAgICB0aGlzLnJlcGxhY2VkQXQkID0gdGhpcy5zdG9yZS5zZWxlY3Qoc2VsZWN0b3JzLnNlbGVjdFJlcGxhY2VkQXQpO1xuICAgICAgdGhpcy5kZWxldGVkQXQkID0gdGhpcy5zdG9yZS5zZWxlY3Qoc2VsZWN0b3JzLnNlbGVjdERlbGV0ZWRBdCk7XG4gICAgfVxuXG4gICAgLy8gcmVnaW9uIFNlbGVjdGlvbnNcbiAgICBhbGwkOiBPYnNlcnZhYmxlPFRNb2RlbFtdPjtcbiAgICBzb3J0ZWQkOiBPYnNlcnZhYmxlPFRNb2RlbFtdPjtcbiAgICBlbnRpdGllcyQ6IE9ic2VydmFibGU8SUVudGl0eURpY3Rpb25hcnk8VE1vZGVsPj47XG4gICAgaWRzJDogT2JzZXJ2YWJsZTxFbnRpdHlJZGVudGl0eVtdPjtcbiAgICB0b3RhbCQ6IE9ic2VydmFibGU8bnVtYmVyPjtcbiAgICBoYXNFbnRpdGllcyQ6IE9ic2VydmFibGU8Ym9vbGVhbj47XG4gICAgaGFzTm9FbnRpdGllcyQ6IE9ic2VydmFibGU8Ym9vbGVhbj47XG4gICAgY3VycmVudCQ6IE9ic2VydmFibGU8VE1vZGVsPjtcbiAgICBjdXJyZW50S2V5JDogT2JzZXJ2YWJsZTxFbnRpdHlJZGVudGl0eT47XG4gICAgY3VycmVudFNldCQ6IE9ic2VydmFibGU8VE1vZGVsW10+O1xuICAgIGN1cnJlbnRTZXRLZXlzJDogT2JzZXJ2YWJsZTxFbnRpdHlJZGVudGl0eVtdPjtcbiAgICBlZGl0ZWQkOiBPYnNlcnZhYmxlPFBhcnRpYWw8VE1vZGVsPj47XG4gICAgaXNEaXJ0eSQ6IE9ic2VydmFibGU8Ym9vbGVhbj47XG4gICAgY3VycmVudFBhZ2UkOiBPYnNlcnZhYmxlPFBhZ2U+O1xuICAgIGN1cnJlbnRSYW5nZSQ6IE9ic2VydmFibGU8UmFuZ2U+O1xuICAgIHRvdGFsUGFnZWFibGUkOiBPYnNlcnZhYmxlPG51bWJlcj47XG4gICAgaGFzQmVlbkxvYWRlZCQ6IE9ic2VydmFibGU8Ym9vbGVhbj47XG4gICAgbG9hZFdhc0F0dGVtcHRlZCQ6IE9ic2VydmFibGU8Ym9vbGVhbj47XG4gICAgaXNMb2FkaW5nJDogT2JzZXJ2YWJsZTxib29sZWFuPjtcbiAgICBpc1NhdmluZyQ6IE9ic2VydmFibGU8Ym9vbGVhbj47XG4gICAgaXNEZWxldGluZyQ6IE9ic2VydmFibGU8Ym9vbGVhbj47XG4gICAgbG9hZGVkQXQkOiBPYnNlcnZhYmxlPERhdGU+O1xuICAgIHNhdmVkQXQkOiBPYnNlcnZhYmxlPERhdGU+O1xuICAgIGNyZWF0ZWRBdCQ6IE9ic2VydmFibGU8RGF0ZT47XG4gICAgdXBkYXRlZEF0JDogT2JzZXJ2YWJsZTxEYXRlPjtcbiAgICByZXBsYWNlZEF0JDogT2JzZXJ2YWJsZTxEYXRlPjtcbiAgICBkZWxldGVkQXQkOiBPYnNlcnZhYmxlPERhdGU+O1xuXG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgY3VzdG9tU29ydGVkJCByZWxpZXMgb24gc2VsZWN0b3JzIHdpdGggcHJvcHMsIHdoaWNoIGhhcyBmYWxsZW4gb3V0IG9mIHByYWN0aWNlLiBXaWxsIGJlIHJlbW92ZWRcbiAgICAgKiBpbiB0aGUgbmV4dCB2ZXJzaW9uIG9mIGF1dG8tZW50aXR5LlxuICAgICAqL1xuICAgIGN1c3RvbVNvcnRlZCQobmFtZTogc3RyaW5nKTogT2JzZXJ2YWJsZTxUTW9kZWxbXT4ge1xuICAgICAgcmV0dXJuIHRoaXMuc3RvcmUuc2VsZWN0KHNlbGVjdG9ycy5zZWxlY3RDdXN0b21Tb3J0ZWQsIHsgbmFtZSB9KTtcbiAgICB9XG4gICAgLy8gZW5kcmVnaW9uXG5cbiAgICAvLyByZWdpb24gQWN0aXZpdGllc1xuICAgIHNlbGVjdChlbnRpdHk6IFRNb2RlbCwgY29ycmVsYXRpb25JZD86IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICBjb25zdCBhY3Rpb24gPSBuZXcgU2VsZWN0KHRoaXMubW9kZWxUeXBlLCBlbnRpdHksIGNvcnJlbGF0aW9uSWQpO1xuICAgICAgdGhpcy5zdG9yZS5kaXNwYXRjaChhY3Rpb24pO1xuICAgICAgcmV0dXJuIGFjdGlvbi5jb3JyZWxhdGlvbklkO1xuICAgIH1cblxuICAgIHNlbGVjdEJ5S2V5KGtleTogRW50aXR5SWRlbnRpdHksIGNvcnJlbGF0aW9uSWQ/OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgY29uc3QgYWN0aW9uID0gbmV3IFNlbGVjdEJ5S2V5KHRoaXMubW9kZWxUeXBlLCBrZXksIGNvcnJlbGF0aW9uSWQpO1xuICAgICAgdGhpcy5zdG9yZS5kaXNwYXRjaChhY3Rpb24pO1xuICAgICAgcmV0dXJuIGFjdGlvbi5jb3JyZWxhdGlvbklkO1xuICAgIH1cblxuICAgIHNlbGVjdE1hbnkoZW50aXRpZXM6IFRNb2RlbFtdLCBjb3JyZWxhdGlvbklkPzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgIGNvbnN0IGFjdGlvbiA9IG5ldyBTZWxlY3RNYW55KHRoaXMubW9kZWxUeXBlLCBlbnRpdGllcywgY29ycmVsYXRpb25JZCk7XG4gICAgICB0aGlzLnN0b3JlLmRpc3BhdGNoKGFjdGlvbik7XG4gICAgICByZXR1cm4gYWN0aW9uLmNvcnJlbGF0aW9uSWQ7XG4gICAgfVxuXG4gICAgc2VsZWN0TW9yZShlbnRpdGllczogVE1vZGVsW10sIGNvcnJlbGF0aW9uSWQ/OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgY29uc3QgYWN0aW9uID0gbmV3IFNlbGVjdE1vcmUodGhpcy5tb2RlbFR5cGUsIGVudGl0aWVzLCBjb3JyZWxhdGlvbklkKTtcbiAgICAgIHRoaXMuc3RvcmUuZGlzcGF0Y2goYWN0aW9uKTtcbiAgICAgIHJldHVybiBhY3Rpb24uY29ycmVsYXRpb25JZDtcbiAgICB9XG5cbiAgICBzZWxlY3RNYW55QnlLZXlzKGtleXM6IEVudGl0eUlkZW50aXR5W10sIGNvcnJlbGF0aW9uSWQ/OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgY29uc3QgYWN0aW9uID0gbmV3IFNlbGVjdE1hbnlCeUtleXModGhpcy5tb2RlbFR5cGUsIGtleXMsIGNvcnJlbGF0aW9uSWQpO1xuICAgICAgdGhpcy5zdG9yZS5kaXNwYXRjaChhY3Rpb24pO1xuICAgICAgcmV0dXJuIGFjdGlvbi5jb3JyZWxhdGlvbklkO1xuICAgIH1cblxuICAgIHNlbGVjdE1vcmVCeUtleXMoa2V5czogRW50aXR5SWRlbnRpdHlbXSwgY29ycmVsYXRpb25JZD86IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICBjb25zdCBhY3Rpb24gPSBuZXcgU2VsZWN0TW9yZUJ5S2V5cyh0aGlzLm1vZGVsVHlwZSwga2V5cywgY29ycmVsYXRpb25JZCk7XG4gICAgICB0aGlzLnN0b3JlLmRpc3BhdGNoKGFjdGlvbik7XG4gICAgICByZXR1cm4gYWN0aW9uLmNvcnJlbGF0aW9uSWQ7XG4gICAgfVxuXG4gICAgZGVzZWxlY3QoY29ycmVsYXRpb25JZD86IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICBjb25zdCBhY3Rpb24gPSBuZXcgRGVzZWxlY3QodGhpcy5tb2RlbFR5cGUsIGNvcnJlbGF0aW9uSWQpO1xuICAgICAgdGhpcy5zdG9yZS5kaXNwYXRjaChhY3Rpb24pO1xuICAgICAgcmV0dXJuIGFjdGlvbi5jb3JyZWxhdGlvbklkO1xuICAgIH1cblxuICAgIGRlc2VsZWN0TWFueShlbnRpdGllczogVE1vZGVsW10sIGNvcnJlbGF0aW9uSWQ/OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgY29uc3QgYWN0aW9uID0gbmV3IERlc2VsZWN0TWFueSh0aGlzLm1vZGVsVHlwZSwgZW50aXRpZXMsIGNvcnJlbGF0aW9uSWQpO1xuICAgICAgdGhpcy5zdG9yZS5kaXNwYXRjaChhY3Rpb24pO1xuICAgICAgcmV0dXJuIGFjdGlvbi5jb3JyZWxhdGlvbklkO1xuICAgIH1cblxuICAgIGRlc2VsZWN0TWFueUJ5S2V5cyhrZXlzOiBFbnRpdHlJZGVudGl0eVtdLCBjb3JyZWxhdGlvbklkPzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgIGNvbnN0IGFjdGlvbiA9IG5ldyBEZXNlbGVjdE1hbnlCeUtleXModGhpcy5tb2RlbFR5cGUsIGtleXMsIGNvcnJlbGF0aW9uSWQpO1xuICAgICAgdGhpcy5zdG9yZS5kaXNwYXRjaChhY3Rpb24pO1xuICAgICAgcmV0dXJuIGFjdGlvbi5jb3JyZWxhdGlvbklkO1xuICAgIH1cblxuICAgIGRlc2VsZWN0QWxsKGNvcnJlbGF0aW9uSWQ/OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgY29uc3QgYWN0aW9uID0gbmV3IERlc2VsZWN0QWxsKHRoaXMubW9kZWxUeXBlLCBjb3JyZWxhdGlvbklkKTtcbiAgICAgIHRoaXMuc3RvcmUuZGlzcGF0Y2goYWN0aW9uKTtcbiAgICAgIHJldHVybiBhY3Rpb24uY29ycmVsYXRpb25JZDtcbiAgICB9XG5cbiAgICBlZGl0KGVudGl0eTogUGFydGlhbDxUTW9kZWw+LCBjb3JyZWxhdGlvbklkPzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgIGNvbnN0IGFjdGlvbiA9IG5ldyBFZGl0KHRoaXMubW9kZWxUeXBlLCBlbnRpdHksIGNvcnJlbGF0aW9uSWQpO1xuICAgICAgdGhpcy5zdG9yZS5kaXNwYXRjaChhY3Rpb24pO1xuICAgICAgcmV0dXJuIGFjdGlvbi5jb3JyZWxhdGlvbklkO1xuICAgIH1cblxuICAgIGVkaXROZXcoZW50aXR5PzogUGFydGlhbDxUTW9kZWw+LCBjb3JyZWxhdGlvbklkPzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgIGNvbnN0IGFjdGlvbiA9IG5ldyBFZGl0TmV3KHRoaXMubW9kZWxUeXBlLCBlbnRpdHksIGNvcnJlbGF0aW9uSWQpO1xuICAgICAgdGhpcy5zdG9yZS5kaXNwYXRjaChhY3Rpb24pO1xuICAgICAgcmV0dXJuIGFjdGlvbi5jb3JyZWxhdGlvbklkO1xuICAgIH1cblxuICAgIGVkaXRCeUtleShrZXk6IEVudGl0eUlkZW50aXR5LCBjb3JyZWxhdGlvbklkPzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgIGNvbnN0IGFjdGlvbiA9IG5ldyBFZGl0QnlLZXkodGhpcy5tb2RlbFR5cGUsIGtleSwgY29ycmVsYXRpb25JZCk7XG4gICAgICB0aGlzLnN0b3JlLmRpc3BhdGNoKGFjdGlvbik7XG4gICAgICByZXR1cm4gYWN0aW9uLmNvcnJlbGF0aW9uSWQ7XG4gICAgfVxuXG4gICAgY2hhbmdlKGVudGl0eTogUGFydGlhbDxUTW9kZWw+LCBjb3JyZWxhdGlvbklkPzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgIGNvbnN0IGFjdGlvbiA9IG5ldyBDaGFuZ2UodGhpcy5tb2RlbFR5cGUsIGVudGl0eSwgY29ycmVsYXRpb25JZCk7XG4gICAgICB0aGlzLnN0b3JlLmRpc3BhdGNoKGFjdGlvbik7XG4gICAgICByZXR1cm4gYWN0aW9uLmNvcnJlbGF0aW9uSWQ7XG4gICAgfVxuXG4gICAgZW5kRWRpdChjb3JyZWxhdGlvbklkPzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgIGNvbnN0IGFjdGlvbiA9IG5ldyBFbmRFZGl0KHRoaXMubW9kZWxUeXBlLCBjb3JyZWxhdGlvbklkKTtcbiAgICAgIHRoaXMuc3RvcmUuZGlzcGF0Y2goYWN0aW9uKTtcbiAgICAgIHJldHVybiBhY3Rpb24uY29ycmVsYXRpb25JZDtcbiAgICB9XG5cbiAgICBsb2FkKGtleXM/OiBhbnksIGNyaXRlcmlhPzogYW55LCBjb3JyZWxhdGlvbklkPzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgIGNvbnN0IGFjdGlvbiA9IG5ldyBMb2FkKHRoaXMubW9kZWxUeXBlLCBrZXlzLCBjcml0ZXJpYSwgY29ycmVsYXRpb25JZCk7XG4gICAgICB0aGlzLnN0b3JlLmRpc3BhdGNoKGFjdGlvbik7XG4gICAgICByZXR1cm4gYWN0aW9uLmNvcnJlbGF0aW9uSWQ7XG4gICAgfVxuXG4gICAgbG9hZElmTmVjZXNzYXJ5KGtleXM/OiBhbnksIGNyaXRlcmlhPzogYW55LCBtYXhBZ2U/OiBudW1iZXIsIGNvcnJlbGF0aW9uSWQ/OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgY29uc3QgYWN0aW9uID0gbmV3IExvYWRJZk5lY2Vzc2FyeSh0aGlzLm1vZGVsVHlwZSwga2V5cywgbWF4QWdlLCBjcml0ZXJpYSwgY29ycmVsYXRpb25JZCk7XG4gICAgICB0aGlzLnN0b3JlLmRpc3BhdGNoKGFjdGlvbik7XG4gICAgICByZXR1cm4gYWN0aW9uLmNvcnJlbGF0aW9uSWQ7XG4gICAgfVxuXG4gICAgbG9hZE1hbnkoY3JpdGVyaWE/OiBhbnksIGNvcnJlbGF0aW9uSWQ/OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgY29uc3QgYWN0aW9uID0gbmV3IExvYWRNYW55KHRoaXMubW9kZWxUeXBlLCBjcml0ZXJpYSwgY29ycmVsYXRpb25JZCk7XG4gICAgICB0aGlzLnN0b3JlLmRpc3BhdGNoKGFjdGlvbik7XG4gICAgICByZXR1cm4gYWN0aW9uLmNvcnJlbGF0aW9uSWQ7XG4gICAgfVxuXG4gICAgbG9hZE1hbnlJZk5lY2Vzc2FyeShjcml0ZXJpYT86IGFueSwgbWF4QWdlPzogbnVtYmVyLCBjb3JyZWxhdGlvbklkPzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgIGNvbnN0IGFjdGlvbiA9IG5ldyBMb2FkTWFueUlmTmVjZXNzYXJ5KHRoaXMubW9kZWxUeXBlLCBtYXhBZ2UsIGNyaXRlcmlhLCBjb3JyZWxhdGlvbklkKTtcbiAgICAgIHRoaXMuc3RvcmUuZGlzcGF0Y2goYWN0aW9uKTtcbiAgICAgIHJldHVybiBhY3Rpb24uY29ycmVsYXRpb25JZDtcbiAgICB9XG5cbiAgICBsb2FkQWxsKGNyaXRlcmlhPzogYW55LCBjb3JyZWxhdGlvbklkPzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgIGNvbnN0IGFjdGlvbiA9IG5ldyBMb2FkQWxsKHRoaXMubW9kZWxUeXBlLCBjcml0ZXJpYSwgY29ycmVsYXRpb25JZCk7XG4gICAgICB0aGlzLnN0b3JlLmRpc3BhdGNoKGFjdGlvbik7XG4gICAgICByZXR1cm4gYWN0aW9uLmNvcnJlbGF0aW9uSWQ7XG4gICAgfVxuXG4gICAgbG9hZEFsbElmTmVjZXNzYXJ5KGNyaXRlcmlhPzogYW55LCBtYXhBZ2U/OiBudW1iZXIsIGNvcnJlbGF0aW9uSWQ/OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgY29uc3QgYWN0aW9uID0gbmV3IExvYWRBbGxJZk5lY2Vzc2FyeSh0aGlzLm1vZGVsVHlwZSwgbWF4QWdlLCBjcml0ZXJpYSwgY29ycmVsYXRpb25JZCk7XG4gICAgICB0aGlzLnN0b3JlLmRpc3BhdGNoKGFjdGlvbik7XG4gICAgICByZXR1cm4gYWN0aW9uLmNvcnJlbGF0aW9uSWQ7XG4gICAgfVxuXG4gICAgbG9hZFBhZ2UocGFnZTogUGFnZSwgY3JpdGVyaWE/OiBhbnksIGNvcnJlbGF0aW9uSWQ/OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgY29uc3QgYWN0aW9uID0gbmV3IExvYWRQYWdlKHRoaXMubW9kZWxUeXBlLCBwYWdlLCBjcml0ZXJpYSwgY29ycmVsYXRpb25JZCk7XG4gICAgICB0aGlzLnN0b3JlLmRpc3BhdGNoKGFjdGlvbik7XG4gICAgICByZXR1cm4gYWN0aW9uLmNvcnJlbGF0aW9uSWQ7XG4gICAgfVxuXG4gICAgbG9hZFBhZ2VJZk5lY2Vzc2FyeShwYWdlOiBQYWdlLCBjcml0ZXJpYT86IGFueSwgbWF4QWdlPzogbnVtYmVyLCBjb3JyZWxhdGlvbklkPzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgIGNvbnN0IGFjdGlvbiA9IG5ldyBMb2FkUGFnZUlmTmVjZXNzYXJ5KHRoaXMubW9kZWxUeXBlLCBwYWdlLCBtYXhBZ2UsIGNyaXRlcmlhLCBjb3JyZWxhdGlvbklkKTtcbiAgICAgIHRoaXMuc3RvcmUuZGlzcGF0Y2goYWN0aW9uKTtcbiAgICAgIHJldHVybiBhY3Rpb24uY29ycmVsYXRpb25JZDtcbiAgICB9XG5cbiAgICBsb2FkUmFuZ2UocmFuZ2U6IFJhbmdlLCBjcml0ZXJpYT86IGFueSwgY29ycmVsYXRpb25JZD86IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICBjb25zdCBhY3Rpb24gPSBuZXcgTG9hZFJhbmdlKHRoaXMubW9kZWxUeXBlLCByYW5nZSwgY3JpdGVyaWEsIGNvcnJlbGF0aW9uSWQpO1xuICAgICAgdGhpcy5zdG9yZS5kaXNwYXRjaChhY3Rpb24pO1xuICAgICAgcmV0dXJuIGFjdGlvbi5jb3JyZWxhdGlvbklkO1xuICAgIH1cblxuICAgIGxvYWRSYW5nZUlmTmVjZXNzYXJ5KHJhbmdlOiBSYW5nZSwgY3JpdGVyaWE/OiBhbnksIG1heEFnZT86IG51bWJlciwgY29ycmVsYXRpb25JZD86IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICBjb25zdCBhY3Rpb24gPSBuZXcgTG9hZFJhbmdlSWZOZWNlc3NhcnkodGhpcy5tb2RlbFR5cGUsIHJhbmdlLCBtYXhBZ2UsIGNyaXRlcmlhLCBjb3JyZWxhdGlvbklkKTtcbiAgICAgIHRoaXMuc3RvcmUuZGlzcGF0Y2goYWN0aW9uKTtcbiAgICAgIHJldHVybiBhY3Rpb24uY29ycmVsYXRpb25JZDtcbiAgICB9XG5cbiAgICBjcmVhdGUoZW50aXR5OiBUTW9kZWwsIGNyaXRlcmlhPzogYW55LCBjb3JyZWxhdGlvbklkPzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgIGNvbnN0IGFjdGlvbiA9IG5ldyBDcmVhdGUodGhpcy5tb2RlbFR5cGUsIGVudGl0eSwgY3JpdGVyaWEsIGNvcnJlbGF0aW9uSWQpO1xuICAgICAgdGhpcy5zdG9yZS5kaXNwYXRjaChhY3Rpb24pO1xuICAgICAgcmV0dXJuIGFjdGlvbi5jb3JyZWxhdGlvbklkO1xuICAgIH1cblxuICAgIGNyZWF0ZU1hbnkoZW50aXRpZXM6IFRNb2RlbFtdLCBjcml0ZXJpYT86IGFueSwgY29ycmVsYXRpb25JZD86IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICBjb25zdCBhY3Rpb24gPSBuZXcgQ3JlYXRlTWFueSh0aGlzLm1vZGVsVHlwZSwgZW50aXRpZXMsIGNyaXRlcmlhLCBjb3JyZWxhdGlvbklkKTtcbiAgICAgIHRoaXMuc3RvcmUuZGlzcGF0Y2goYWN0aW9uKTtcbiAgICAgIHJldHVybiBhY3Rpb24uY29ycmVsYXRpb25JZDtcbiAgICB9XG5cbiAgICB1cGRhdGUoZW50aXR5OiBUTW9kZWwsIGNyaXRlcmlhPzogYW55LCBjb3JyZWxhdGlvbklkPzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgIGNvbnN0IGFjdGlvbiA9IG5ldyBVcGRhdGUodGhpcy5tb2RlbFR5cGUsIGVudGl0eSwgY3JpdGVyaWEsIGNvcnJlbGF0aW9uSWQpO1xuICAgICAgdGhpcy5zdG9yZS5kaXNwYXRjaChhY3Rpb24pO1xuICAgICAgcmV0dXJuIGFjdGlvbi5jb3JyZWxhdGlvbklkO1xuICAgIH1cblxuICAgIHVwZGF0ZU1hbnkoZW50aXRpZXM6IFRNb2RlbFtdLCBjcml0ZXJpYT86IGFueSwgY29ycmVsYXRpb25JZD86IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICBjb25zdCBhY3Rpb24gPSBuZXcgVXBkYXRlTWFueSh0aGlzLm1vZGVsVHlwZSwgZW50aXRpZXMsIGNyaXRlcmlhLCBjb3JyZWxhdGlvbklkKTtcbiAgICAgIHRoaXMuc3RvcmUuZGlzcGF0Y2goYWN0aW9uKTtcbiAgICAgIHJldHVybiBhY3Rpb24uY29ycmVsYXRpb25JZDtcbiAgICB9XG5cbiAgICB1cHNlcnQoZW50aXR5OiBUTW9kZWwsIGNyaXRlcmlhPzogYW55LCBjb3JyZWxhdGlvbklkPzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgIGNvbnN0IGFjdGlvbiA9IG5ldyBVcHNlcnQodGhpcy5tb2RlbFR5cGUsIGVudGl0eSwgY3JpdGVyaWEsIGNvcnJlbGF0aW9uSWQpO1xuICAgICAgdGhpcy5zdG9yZS5kaXNwYXRjaChhY3Rpb24pO1xuICAgICAgcmV0dXJuIGFjdGlvbi5jb3JyZWxhdGlvbklkO1xuICAgIH1cblxuICAgIHVwc2VydE1hbnkoZW50aXRpZXM6IFRNb2RlbFtdLCBjcml0ZXJpYT86IGFueSwgY29ycmVsYXRpb25JZD86IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICBjb25zdCBhY3Rpb24gPSBuZXcgVXBzZXJ0TWFueSh0aGlzLm1vZGVsVHlwZSwgZW50aXRpZXMsIGNyaXRlcmlhLCBjb3JyZWxhdGlvbklkKTtcbiAgICAgIHRoaXMuc3RvcmUuZGlzcGF0Y2goYWN0aW9uKTtcbiAgICAgIHJldHVybiBhY3Rpb24uY29ycmVsYXRpb25JZDtcbiAgICB9XG5cbiAgICByZXBsYWNlKGVudGl0eTogVE1vZGVsLCBjcml0ZXJpYT86IGFueSwgY29ycmVsYXRpb25JZD86IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICBjb25zdCBhY3Rpb24gPSBuZXcgUmVwbGFjZSh0aGlzLm1vZGVsVHlwZSwgZW50aXR5LCBjcml0ZXJpYSwgY29ycmVsYXRpb25JZCk7XG4gICAgICB0aGlzLnN0b3JlLmRpc3BhdGNoKGFjdGlvbik7XG4gICAgICByZXR1cm4gYWN0aW9uLmNvcnJlbGF0aW9uSWQ7XG4gICAgfVxuXG4gICAgcmVwbGFjZU1hbnkoZW50aXRpZXM6IFRNb2RlbFtdLCBjcml0ZXJpYT86IGFueSwgY29ycmVsYXRpb25JZD86IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICBjb25zdCBhY3Rpb24gPSBuZXcgUmVwbGFjZU1hbnkodGhpcy5tb2RlbFR5cGUsIGVudGl0aWVzLCBjcml0ZXJpYSwgY29ycmVsYXRpb25JZCk7XG4gICAgICB0aGlzLnN0b3JlLmRpc3BhdGNoKGFjdGlvbik7XG4gICAgICByZXR1cm4gYWN0aW9uLmNvcnJlbGF0aW9uSWQ7XG4gICAgfVxuXG4gICAgZGVsZXRlKGVudGl0eTogVE1vZGVsLCBjcml0ZXJpYT86IGFueSwgY29ycmVsYXRpb25JZD86IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICBjb25zdCBhY3Rpb24gPSBuZXcgRGVsZXRlKHRoaXMubW9kZWxUeXBlLCBlbnRpdHksIGNyaXRlcmlhLCBjb3JyZWxhdGlvbklkKTtcbiAgICAgIHRoaXMuc3RvcmUuZGlzcGF0Y2goYWN0aW9uKTtcbiAgICAgIHJldHVybiBhY3Rpb24uY29ycmVsYXRpb25JZDtcbiAgICB9XG5cbiAgICBkZWxldGVNYW55KGVudGl0aWVzOiBUTW9kZWxbXSwgY3JpdGVyaWE/OiBhbnksIGNvcnJlbGF0aW9uSWQ/OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgY29uc3QgYWN0aW9uID0gbmV3IERlbGV0ZU1hbnkodGhpcy5tb2RlbFR5cGUsIGVudGl0aWVzLCBjcml0ZXJpYSwgY29ycmVsYXRpb25JZCk7XG4gICAgICB0aGlzLnN0b3JlLmRpc3BhdGNoKGFjdGlvbik7XG4gICAgICByZXR1cm4gYWN0aW9uLmNvcnJlbGF0aW9uSWQ7XG4gICAgfVxuXG4gICAgZGVsZXRlQnlLZXkoa2V5OiBzdHJpbmcgfCBudW1iZXIsIGNyaXRlcmlhPzogYW55LCBjb3JyZWxhdGlvbklkPzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgIGNvbnN0IGFjdGlvbiA9IG5ldyBEZWxldGVCeUtleSh0aGlzLm1vZGVsVHlwZSwga2V5LCBjcml0ZXJpYSwgY29ycmVsYXRpb25JZCk7XG4gICAgICB0aGlzLnN0b3JlLmRpc3BhdGNoKGFjdGlvbik7XG4gICAgICByZXR1cm4gYWN0aW9uLmNvcnJlbGF0aW9uSWQ7XG4gICAgfVxuXG4gICAgZGVsZXRlTWFueUJ5S2V5cyhrZXlzOiBFbnRpdHlJZGVudGl0eVtdLCBjcml0ZXJpYT86IGFueSwgY29ycmVsYXRpb25JZD86IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICBjb25zdCBhY3Rpb24gPSBuZXcgRGVsZXRlTWFueUJ5S2V5cyh0aGlzLm1vZGVsVHlwZSwga2V5cywgY3JpdGVyaWEsIGNvcnJlbGF0aW9uSWQpO1xuICAgICAgdGhpcy5zdG9yZS5kaXNwYXRjaChhY3Rpb24pO1xuICAgICAgcmV0dXJuIGFjdGlvbi5jb3JyZWxhdGlvbklkO1xuICAgIH1cblxuICAgIGNsZWFyKGNvcnJlbGF0aW9uSWQ/OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgY29uc3QgYWN0aW9uID0gbmV3IENsZWFyKHRoaXMubW9kZWxUeXBlLCBjb3JyZWxhdGlvbklkKTtcbiAgICAgIHRoaXMuc3RvcmUuZGlzcGF0Y2goYWN0aW9uKTtcbiAgICAgIHJldHVybiBhY3Rpb24uY29ycmVsYXRpb25JZDtcbiAgICB9XG4gICAgLy8gZW5kcmVnaW9uXG4gIH07XG5cbiAgcmV0dXJuIEJhc2VGYWNhZGU7XG59O1xuIl19